<script>
let cart = JSON.parse(localStorage.getItem("cart")) || [];

function updateCartDisplay() {
    const cartItemsContainer = document.getElementById("cart-items");
    const totalPriceElement = document.getElementById("total-price");
    cartItemsContainer.innerHTML = "";

    let total = 0;

    cart.forEach((item, index) => {
        total += item.price * item.quantity;
        cartItemsContainer.innerHTML += `
            <div class="cart-item" style="display:flex; align-items:center; justify-content:space-between; margin-bottom:10px; border-bottom:1px solid #ddd; padding:8px;">
                <div>
                    <strong>${item.name}</strong> - ₹${item.price} × ${item.quantity}
                </div>
                <div>
                    <button onclick="decreaseQuantity(${index})" style="background:red;color:white;border:none;padding:5px 10px;border-radius:5px;">-</button>
                </div>
            </div>
        `;
    });

    totalPriceElement.textContent = `₹${total}`;
    localStorage.setItem("cart", JSON.stringify(cart));
}

// Decrease quantity or remove if 0
function decreaseQuantity(index) {
    if (cart[index].quantity > 1) {
        cart[index].quantity--;
    } else {
        cart.splice(index, 1);
    }
    updateCartDisplay();
    updateCartCount();
}

function updateCartCount() {
    const cartCount = document.getElementById("cart-count");
    if (cartCount) {
        cartCount.textContent = cart.length > 0 ? cart.length : "";
    }
}

document.addEventListener("DOMContentLoaded", () => {
    updateCartDisplay();
    updateCartCount();
});
</script>
